{{- if .Values.gatekeeper.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: "{{ include "cdp.frontend.fullname" . }}-gatekeeper-secrets"
  labels:
    {{- include "cdp.frontend.labels" . | nindent 4 }}
type: Opaque    
stringData:
  config.yaml: |
    client-id: frontend
    client-secret: {{ .Values.gatekeeper.config.clientSecret }}
    discovery-url: {{ .Values.gatekeeper.config.discoveryUrl }}
    enable-default-deny: {{ .Values.gatekeeper.config.enableDefaultDeny }}
    enable-refresh-tokens: {{ .Values.gatekeeper.config.enableRefreshTokens }}
    enable-metrics: {{ .Values.gatekeeper.config.enableMetrics }}
    no-redirects: false
    encryption-key: {{ .Values.gatekeeper.config.encryptionKey }}
    skip-openid-provider-tls-verify: {{ .Values.gatekeeper.config.skipOpenidProviderTlsVerify }}
    listen: :{{ .Values.gatekeeper.config.listen }}
    listen-admin: :{{ .Values.gatekeeper.config.listenAdmin }}
    secure-cookie: {{ .Values.gatekeeper.config.listen }}
    redirection-url: {{ .Values.gatekeeper.config.redirectionUrl }}
    upstream-url: {{ .Values.gatekeeper.config.upstreamUrl }}
{{- end }}
