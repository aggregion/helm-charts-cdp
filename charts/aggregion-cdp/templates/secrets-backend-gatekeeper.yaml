{{- if .Values.gatekeeper.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: "{{ include "cdp.backend.fullname" . }}-gatekeeper-secrets"
  labels:
    {{- include "cdp.backend.labels" . | nindent 4 }}
type: Opaque
stringData:
  config.yaml: |
    {{- toYaml .Values.gatekeeper.config | nindent 4 }}
    {{- if .Values.backend.gatekeeper.ExtraConfig }}
    {{- toYaml .Values.backend.gatekeeper.ExtraConfig | nindent 4 }}
    {{- end }}
{{- end }}
