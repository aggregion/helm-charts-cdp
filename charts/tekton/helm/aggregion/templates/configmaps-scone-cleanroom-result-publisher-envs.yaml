{{- if .Values.sconeCleanroom.enabled -}}
{{- $name := .Release.Name -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: "scone-cleanroom-result-publisher-config-{{ $name }}"
data:
  SCONE_HEAP: "{{ .Values.sconeCleanroom.resultPublisher.sconeHeap }}"
  SCONE_LOG: "{{ .Values.sconeCleanroom.resultPublisher.logLevel }}"
  {{- range .Values.sconeCleanroom.resultPublisher.envs }}
  {{ .name }}: {{ .value | quote }}
  {{- end }}
  {{- if .Values.sconeCleanroom.resultPublisher.config.nodeOptions }}
  NODE_OPTIONS: "{{ .Values.sconeCleanroom.resultPublisher.config.nodeOptions }}"
  {{- end }}
{{- end -}}
